# ChanceRAG Product Requirements Document (PRD)
## 사내 규정 상담 챗봇

## 1. 제품 개요

### 1.1 제품명
**ChanceRAG** - 사내 규정 상담 챗봇

### 1.2 제품 한 줄 설명
사내 직원이 규정을 빠르게 찾아보고 이해할 수 있도록, PDF 규정을 RAG로 검색·답변해 주는 웹 기반 챗봇입니다.

### 1.3 제품 비전
사내 규정 문서에 대한 직원의 접근성과 이해도를 높여, HR·총무팀의 업무 부담을 줄이고 직원 만족도를 향상시키는 지능형 규정 상담 시스템

### 1.4 제품 목표
- 반복적인 규정 문의량 50% 감소
- 규정 이해도 향상(쉬운 설명 제공)으로 직원 만족도(NPS) 상승
- 출시 3개월 내 월간 활성 사용자 비율(MAU/전체) 70% 달성
- 사내 규정 문서의 효율적인 검색 및 이해 지원

## 2. 배경 및 문제점

### 2.1 현재 상황
- 방대한 규정 문서 때문에 직원이 필요한 조항을 찾는 데 많은 시간을 소모
- 반복적인 규정 문의로 HR·총무팀 업무 부담이 과도함
- 기존 사내 검색 시스템은 사용성이 낮고 모바일에서 불편함

### 2.2 주요 사용자
- 일반 직원 51–200명 규모의 중소기업
- HR·총무팀 (관리자 역할)

## 3. 사용자 여정 (User Journey)

### 3.1 일반 직원 사용자 여정

#### 3.1.1 규정 문의 시나리오
**페르소나**: 김대리 (마케팅팀, 입사 2년차)
**상황**: 휴가 신청 관련 규정이 궁금함

1. **인식 단계**
   - 휴가 신청 시 필요한 서류가 궁금해짐
   - 기존에는 HR팀에 직접 문의했지만, 빠른 답변이 필요함
   - 사내 포털에서 규정 챗봇을 발견

2. **접근 단계**
   - 사내 포털 로그인 (IP 기반 자동 인증)
   - "규정 상담" 메뉴 클릭
   - 챗봇 인터페이스 진입

3. **질문 단계**
   - 자연어로 질문 입력: "연차 휴가 신청할 때 필요한 서류가 뭐야?"
   - 또는 키워드 검색: "휴가 신청 서류"
   - 질문 제출

4. **답변 수신 단계**
   - 10초 내 실시간 스트리밍 답변 수신
   - 관련 규정 조항과 함께 쉬운 설명 제공
   - 출처 문서 링크 및 조항 번호 표시

5. **활용 단계**
   - 답변을 즐겨찾기에 저장
   - 동료에게 링크 공유
   - 실제 휴가 신청 프로세스 진행

#### 3.1.2 출장비 정산 규정 확인 시나리오
**페르소나**: 김OO 사원 (영업팀, 입사 3년차)
**상황**: 출장비 정산 규정 변경 소문으로 인한 한도 확인

1. **문제 인지**
   - 출장비 정산 규정이 변경됐다는 소문을 듣고 '출장 숙박비 한도'가 궁금함
   - 기존 규정 문서를 찾기 어려워 빠른 확인이 필요

2. **접속 & 탐색**
   - 사내 포털 메인 페이지에 있는 "규정 챗봇" 버튼을 클릭
   - 별도 로그인 과정 없이 챗봇 창이 즉시 열림 (0.5초)
   - 직관적인 인터페이스로 접근성 우수

3. **질문 입력**
   - 입력창에 "출장 숙박비 한도가 얼마인가요?" 라고 입력 후 Enter
   - 자연어 질문으로 편리한 입력

4. **검색 & 처리 (백엔드)**
   - 챗봇 서버가 질문을 받자마자 임베딩 생성
   - 벡터 검색으로 관련 PDF 조항 Top-K(예: 3개) 반환
   - OpenAI API와 RAG 프롬프트 조합으로 답변 텍스트·쉬운 설명·근거 링크를 생성 (총 7초)

5. **답변 제공**
   - 챗봇이 다음을 한 화면에 표시:
     - '○○규정 3조 2항' 원문 인용
     - '숙박비 일 150,000원'과 같은 핵심 값
     - 쉬운 설명 카드
     - '즐겨찾기 ★'와 '링크 복사' 아이콘

6. **행동**
   - 정보를 확인하고 '즐겨찾기' 아이콘을 눌러 저장
   - 링크를 복사해 팀 채팅방에 공유
   - 동료들과 정보 공유로 팀 전체의 업무 효율성 향상

7. **결과 & 만족**
   - 필요 정보 획득까지 1분도 걸리지 않음
   - HR팀에 문의할 필요가 없어져 절차가 단축됨
   - 챗봇 종료 버튼을 눌러 창을 닫음

8. **사후 처리 (관리자)**
   - 사용 로그가 로컬 서버에 저장
   - 관리자 대시보드에 '출장비' 키워드 검색 횟수가 표시
   - 정책 FAQ 업데이트 근거 자료로 활용됨

### 3.2 HR/총무팀 관리자 여정

#### 3.2.1 규정 업데이트 시나리오
**페르소나**: 이부장 (HR팀, 10년차)
**상황**: 새로운 복리후생 규정 업데이트

1. **인식 단계**
   - 새로운 복리후생 규정 PDF 수신
   - 직원들에게 빠른 공지 필요

2. **접근 단계**
   - 관리자 대시보드 접속
   - "문서 업로드" 메뉴 선택

3. **업로드 단계**
   - PDF 파일 드래그 앤 드롭
   - 문서 정보 입력 (제목, 카테고리, 유효기간)
   - 업로드 실행

4. **처리 단계**
   - 자동 임베딩 생성 (5-10분 소요)
   - 인덱스 재빌드 완료 알림
   - 업로드 완료 확인

5. **공지 단계**
   - 직원들에게 새 규정 업데이트 공지
   - 챗봇을 통한 질문 유도

#### 3.2.2 사용 현황 모니터링 시나리오
**페르소나**: 최대리 (총무팀, 7년차)
**상황**: 월간 사용 현황 점검

1. **접근 단계**
   - 관리자 대시보드 접속
   - "사용 통계" 메뉴 선택

2. **분석 단계**
   - 월간 활성 사용자 수 확인
   - 인기 질문 TOP 10 검토
   - 응답 시간 통계 확인

3. **개선 단계**
   - 자주 묻는 질문에 대한 FAQ 업데이트
   - 응답이 부정확한 질문 식별
   - 추가 문서 업로드 필요성 검토

4. **보고 단계**
   - 상급자에게 사용 현황 보고
   - 개선 방안 제안

### 3.3 사용자 여정 맵

```
일반 직원 여정 (김OO 사원):
[문제 인지] → [접속 & 탐색] → [질문 입력] → [검색 & 처리] → [답변 제공] → [행동] → [결과 & 만족] → [사후 처리]

상세 플로우:
문제 인지 (출장비 규정 변경 소문)
    ↓
접속 & 탐색 (사내 포털 → 규정 챗봇 클릭 → 0.5초 로딩)
    ↓
질문 입력 ("출장 숙박비 한도가 얼마인가요?")
    ↓
검색 & 처리 (임베딩 생성 → 벡터 검색 → RAG 답변 생성, 7초)
    ↓
답변 제공 (원문 인용 + 핵심 값 + 쉬운 설명 + 즐겨찾기/공유 버튼)
    ↓
행동 (즐겨찾기 저장 + 팀 채팅방 공유)
    ↓
결과 & 만족 (1분 내 정보 획득, HR 문의 불필요)
    ↓
사후 처리 (로그 저장, 관리자 대시보드 통계 업데이트)

관리자 여정:
[규정 업데이트] → [대시보드 접근] → [문서 업로드] → [자동 처리] → [공지/모니터링]
```

### 3.4 터치포인트별 사용자 경험

| 단계 | 터치포인트 | 사용자 경험 목표 | 성공 지표 | 실제 측정값 |
|------|------------|------------------|-----------|-------------|
| 문제 인지 | 사내 포털 | 직관적인 접근 | 클릭률 80% | - |
| 접속 & 탐색 | 챗봇 인터페이스 | 즉시 로딩 | 0.5초 이내 로딩 | 0.5초 |
| 질문 입력 | 입력 인터페이스 | 자연어 질문 입력 | 오타율 5% 이하 | - |
| 검색 & 처리 | 백엔드 처리 | 빠른 검색 및 답변 생성 | 7초 이내 처리 | 7초 |
| 답변 제공 | 스트리밍 응답 | 정확하고 이해하기 쉬운 답변 | 10초 이내 응답 | - |
| 행동 | 즐겨찾기/공유 | 편리한 저장/공유 | 재사용률 60% | - |
| 결과 & 만족 | 전체 프로세스 | 1분 내 정보 획득 | 전체 소요시간 1분 이내 | 1분 |
| 사후 처리 | 로그 시스템 | 투명한 사용 통계 | 로그 저장률 100% | - |

### 3.5 사용자 만족도 지표

| 지표 | 목표 | 측정 방법 |
|------|------|-----------|
| 전체 소요시간 | 1분 이내 | 사용자 세션 타임스탬프 분석 |
| 응답 정확도 | 90% 이상 | 사용자 피드백 및 관리자 검증 |
| 재사용률 | 60% 이상 | 즐겨찾기 저장 및 링크 공유 횟수 |
| HR 문의 감소율 | 50% 이상 | Helpdesk 티켓 수 비교 |
| 사용자 만족도 | 4.5/5.0 이상 | 월간 사용자 설문조사 |

## 4. 핵심 사용 시나리오

### 4.1 기본 사용 플로우
1. 직원이 사내 포털에서 챗봇을 연다
2. 규정 번호·키워드 또는 상황을 입력한다
3. 챗봇이 PDF 원문을 RAG로 검색해 관련 조항과 쉬운 설명을 10초 내 제시한다
4. 직원은 답변을 즐겨찾기하거나 링크를 복사해 동료와 공유한다
5. 필요 시 최신 규정 업로드를 요청한다(관리자 기능)

## 4. 핵심 기능 요구사항

### 4.1 F1: 규정 Q&A (RAG)
- **PDF 임베딩**: 규정 PDF 문서의 벡터 임베딩 생성
- **벡터 검색**: 의미적 유사도 기반 정확한 조항 검색
- **정확한 인용**: 답변에 사용된 규정 조항의 정확한 출처 표시
- **답변·요약 제공**: 복잡한 규정을 이해하기 쉬운 형태로 변환

### 4.2 F2: PDF 업로드·버전 관리
- **관리자 업로드**: 새로운 규정 PDF 업로드 기능
- **자동 임베딩**: 업로드된 PDF의 자동 벡터 임베딩 생성
- **인덱스 재빌드**: 새로운 문서 추가 시 검색 인덱스 자동 업데이트
- **버전 관리**: 규정 문서의 버전 추적 및 관리

### 4.3 F3: 관리자 대시보드
- **사용 로그**: 사용자 질문 및 답변 로그 확인
- **인기 질문**: 자주 묻는 질문 통계 및 분석
- **문서 업로드 현황**: 업로드된 규정 문서 현황 관리
- **시스템 상태**: 시스템 성능 및 상태 모니터링

### 4.4 F4: 즐겨찾기·링크 공유
- **답변 저장**: 유용한 답변을 즐겨찾기로 저장
- **링크 공유**: 답변 링크를 동료와 공유하는 기능
- **개인화**: 사용자별 즐겨찾기 관리

### 4.5 F5: 쉬운 설명(요약)
- **법적 문구 변환**: 딱딱한 법적 문구를 이해하기 쉬운 문장으로 변환
- **상황별 설명**: 구체적인 상황에 맞는 설명 제공
- **예시 제공**: 규정 적용 예시 및 케이스 스터디

## 3. 기술적 요구사항

### 3.1 기술 스택
- **Backend**: Python 3.10+, FastAPI, Uvicorn
- **RAG Framework**: LangChain, langchain-teddynote
- **LLM**: OpenAI GPT-4, GPT-4o, Anthropic Claude
- **Vector Database**: FAISS, Chroma, Pinecone
- **Document Processing**: Synapsoft DocuAnalyzer, Kiwi Tokenizer
- **Translation**: DeepL API
- **Monitoring**: LangSmith, MLflow

### 3.2 성능 요구사항
- **응답 시간**: 평균 2초 이내 응답 생성
- **동시 사용자**: 최소 100명 동시 처리
- **처리량**: 초당 50개 쿼리 처리
- **가용성**: 99.9% 서비스 가용성
- **확장성**: 수평적 확장 지원

### 3.3 보안 요구사항
- **데이터 암호화**: 전송 및 저장 데이터 암호화
- **API 보안**: OAuth 2.0, JWT 토큰 기반 인증
- **입력 검증**: 사용자 입력 데이터 검증 및 필터링
- **로그 관리**: 보안 이벤트 로깅 및 모니터링

## 4. 사용자 경험 요구사항

### 4.1 사용자 인터페이스
- **직관적 UI**: 사용하기 쉬운 웹 인터페이스
- **실시간 피드백**: 스트리밍 응답으로 즉각적인 피드백
- **반응형 디자인**: 모바일 및 데스크톱 지원
- **다크/라이트 모드**: 사용자 선호도에 따른 테마 지원

### 4.2 사용성
- **빠른 검색**: 타이핑과 동시에 실시간 검색 제안
- **검색 히스토리**: 이전 검색 기록 관리
- **즐겨찾기**: 자주 사용하는 문서나 쿼리 저장
- **내보내기**: 검색 결과를 다양한 형식으로 내보내기

## 5. 데이터 요구사항

### 5.1 지원 문서 형식
- **PDF**: 스캔된 PDF 및 텍스트 PDF
- **Word**: .docx 파일
- **웹페이지**: HTML, Markdown
- **텍스트**: .txt, .md 파일
- **이미지**: PNG, JPG, GIF (OCR 지원)

### 5.2 데이터 관리
- **버전 관리**: 문서 업데이트 시 버전 추적
- **메타데이터**: 문서 정보, 업로드 날짜, 수정 이력
- **백업**: 정기적인 데이터 백업
- **아카이브**: 오래된 데이터 아카이브 관리

## 6. 통합 요구사항

### 6.1 외부 서비스 연동
- **OpenAI API**: GPT 모델 연동
- **DeepL API**: 다국어 번역 지원
- **Synapsoft API**: 문서 분석 서비스
- **LangSmith**: 실험 추적 및 모니터링

### 6.2 확장성
- **플러그인 시스템**: 새로운 기능 추가를 위한 플러그인 아키텍처
- **API 확장**: 커스텀 API 엔드포인트 추가 지원
- **커스텀 모델**: 사용자 정의 모델 통합 지원

## 7. 배포 및 운영 요구사항

### 7.1 배포 환경
- **컨테이너화**: Docker, Docker Compose 지원
- **클라우드 배포**: AWS, GCP, Azure 지원
- **로컬 배포**: 개발 및 테스트 환경 지원
- **CI/CD**: 자동화된 배포 파이프라인

### 7.2 모니터링 및 로깅
- **성능 모니터링**: 응답 시간, 처리량, 에러율 추적
- **사용자 행동 분석**: 검색 패턴, 인기 쿼리 분석
- **시스템 로그**: 상세한 시스템 로그 및 에러 추적
- **알림 시스템**: 장애 발생 시 즉시 알림

## 8. 성공 지표 (KPI)

### 8.1 성능 지표
- **응답 정확도**: 90% 이상의 정확한 답변 제공
- **응답 시간**: 평균 2초 이내 응답
- **사용자 만족도**: 4.5/5.0 이상의 사용자 평점
- **시스템 가용성**: 99.9% 이상의 서비스 가용성

### 8.2 비즈니스 지표
- **사용자 증가율**: 월 20% 이상의 사용자 증가
- **검색 성공률**: 85% 이상의 검색 성공률
- **사용자 재방문율**: 70% 이상의 재방문율
- **API 사용량**: 일일 10,000회 이상의 API 호출

## 9. 개발 로드맵

### 9.1 Phase 1 (MVP) - 4주
- 기본 RAG 시스템 구현
- PDF 문서 처리 기능
- 간단한 웹 인터페이스
- OpenAI API 연동

### 9.2 Phase 2 (확장) - 6주
- 멀티모달 지원 추가
- 고급 검색 기능
- 사용자 인증 시스템
- API 문서화

### 9.3 Phase 3 (최적화) - 4주
- 성능 최적화
- 모니터링 시스템 구축
- 보안 강화
- 사용자 피드백 반영

## 10. 위험 요소 및 대응 방안

### 10.1 기술적 위험
- **API 제한**: OpenAI API 사용량 제한 → 대체 모델 준비
- **성능 이슈**: 대용량 문서 처리 지연 → 캐싱 및 최적화
- **보안 취약점**: 데이터 유출 위험 → 보안 감사 및 테스트

### 10.2 비즈니스 위험
- **경쟁사 대응**: 유사 서비스 출현 → 차별화된 기능 개발
- **사용자 수용**: 낮은 사용자 수용도 → 사용자 피드백 수집 및 개선
- **비용 증가**: 인프라 비용 증가 → 효율적인 리소스 관리

---

**문서 버전**: 1.0  
**작성일**: 2025-01-27  
**작성자**: ChanceRAG Development Team  
**승인자**: Project Manager
